{"version":3,"sources":["webpack:///./src/router/index.js","webpack:///src/components/navibar.vue","webpack:///./src/components/navibar.vue?92c3","webpack:///src/App.vue","webpack:///./src/components/navibar.vue","webpack:///./src/App.vue?cb9d","webpack:///./src/App.vue","webpack:///./src/api/firebase.js","webpack:///./src/store/mutations.js","webpack:///./src/store/mutation-types.js","webpack:///./src/store/actions.js","webpack:///./src/store/index.js","webpack:///./src/main.js"],"names":["vue_esm","use","vue_router_esm","components","pages","key","name","testComponent1","__webpack_require__","e","then","bind","NumPad","cart","ItemCard","Promise","all","checkout","CustomList","ItemTable","ItemOrder","CartsTable","Settings","router","routes","path","component","navibar","data","mounted","this","init","computed","extends_default","Object","vuex_esm","methods","_this","setTimeout","checkUser","components_navibar","render","_vm","_h","$createElement","_c","_self","attrs","fixed","sticky","undefined","userInformation","staticClass","id","text","_l","page","to","_v","_s","_e","show","alertMessage","message","alertSuccess","variant","on","click","$event","signInWith","displayName","signOut","staticRenderFns","App","normalizeComponent","selectortype_template_index_0_src_App","config","src_App","App_normalizeComponent","ssrContext","mutations","_SET_DATA$SET_ALERTSU","defineProperty_default","state","_ref","_ref2","slicedToArray_default","container","payload","console","log","typeof_default","msg","obj","login","index","findIndex","item","specials_id","push","number","parseInt","result","cashierOpened","_ref3","_ref4","forEach","items","specials","carts","res","splice","_ref5","_ref6","shops","fb","apiKey","authDomain","databaseURL","projectId","index_cjs_default","a","initializeApp","firestore","settings","timestampsInSnapshots","_ref7","_ref11","_ref15","_ref19","_ref23","Firestore","classCallCheck_default","ref","split","reduce","collection","doc","timestamp","FieldValue","serverTimestamp","propDelete","delete","auth","AuthCtrl","setPersistence","type","Auth","Persistence","authWithGoogle","signInWithPopup","provider","authWithAnon","signInAnonymously","getUser","currentUser","filterUserInfo","rawData","allow","keys_default","filter","includes","GoogleAuthProvider","asyncToGenerator_default","regenerator_default","mark","_callee","filtered","userData","user","commit","wrap","_context","prev","next","abrupt","t0","sent","fbGet","uid","assign_default","identity","fbPost","t1","stop","actions__this","_x","_x2","apply","arguments","_callee2","_context2","t2","_x3","_callee3","_context3","shopId","error","_x4","_callee4","_ref8","_ref9","_ref10","_context4","get","docReader","_x5","_x6","_callee5","_ref12","_ref13","_ref14","_context5","date","set","add","_x7","_x8","fbUpdate","_callee6","_ref16","_ref17","prop","_ref18","_context6","roles","last_update","update","_x9","_x10","fbDelete","_callee7","_ref20","_ref21","_context7","_x11","_x12","fbQuery","_callee8","_ref24","_ref25","_ref26","query","_context8","where","_x13","_x14","exists","store_state","my_shop","store","Store","actions","actions_namespaceObject","es","productionTip","el","template"],"mappings":"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","file":"static/js/app.fc2929c652ee078633c9.js","sourcesContent":["import Vue from 'vue'\r\nimport VueRouter from 'vue-router'\r\n\r\nVue.use(VueRouter)\r\n\r\nexport const components = [\r\n  'testComponent1',\r\n  'NumPad',\r\n  'cart',\r\n  'ItemCard',\r\n  'checkout',\r\n  'CustomList'\r\n]\r\nexport const pages = [\r\n  {key: 'ItemOrder', name: '點餐介面'},\r\n  {key: 'Settings', name: '設定'},\r\n]\r\nconst testComponent1 = () => import('@/components/testComponent1')\r\nconst NumPad = () => import('@/components/NumPad')\r\nconst cart = () => import('@/components/cart')\r\nconst ItemCard = () => import('@/components/ItemCard')\r\nconst checkout = () => import('@/components/checkout')\r\nconst CustomList = () => import('@/components/CustomList')\r\n\r\n\r\nconst ItemTable = () => import('@/page/ItemTable')\r\nconst ItemOrder = () => import('@/page/ItemOrder')\r\nconst CartsTable = () => import('@/page/CartsTable')\r\nconst Settings = () => import('@/page/Settings')\r\n\r\nfunction createRouter () {\r\n  return new VueRouter({\r\n    routes: [\r\n      {path: '/', component: Settings},\r\n      {path: '/testComponent1', component: testComponent1},\r\n      {path: '/NumPad', component: NumPad},\r\n      {path: '/cart', component: cart},\r\n      {path: '/ItemCard', component: ItemCard},\r\n      {path: '/ItemTable', component: ItemTable},\r\n      {path: '/ItemOrder', component: ItemOrder},\r\n      {path: '/checkout', component: checkout},\r\n      {path: '/CartsTable', component: CartsTable},\r\n      {path: '/CustomList', component: CustomList},\r\n      {path: '/Settings', component: Settings},\r\n    ]\r\n  })\r\n}\r\n\r\nexport const router = createRouter()\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","<template>\r\n  <b-navbar fixed=\"top\" sticky>\r\n    <b-navbar-nav class=\"mr-auto\" v-if=\"userInformation !== undefined\">\r\n      <b-dropdown id=\"ddown-left\" text=\"功能表\" v-if=\"userInformation.shopId\">\r\n        <b-dropdown-item v-for=\"(page) in pages\" :key=\"page.key\" :to=\"`/${page.key}`\">\r\n          {{page.name}}\r\n        </b-dropdown-item>\r\n      </b-dropdown>\r\n    </b-navbar-nav>\r\n    <b-navbar-nav>\r\n      <b-alert v-if=\"alertMessage\" show>{{ alertMessage.message }}</b-alert>\r\n      <b-alert v-if=\"alertSuccess\" show>{{ alertSuccess }}</b-alert>\r\n    </b-navbar-nav>\r\n    <b-navbar-nav class=\"ml-auto\">\r\n      <b-nav-item v-if=\"userInformation === undefined\">\r\n        <b-button @click=\"signInWith('google')\" variant=\"outline-success\">Google登入</b-button>\r\n        <b-button @click=\"signInWith('anon')\">匿名登錄</b-button>\r\n      </b-nav-item>\r\n      <b-nav-item v-else>\r\n        {{ userInformation.displayName }}\r\n        <b-button @click=\"signOut()\" variant=\"outline-danger\">登出</b-button>\r\n      </b-nav-item>\r\n    </b-navbar-nav>\r\n  </b-navbar>\r\n</template>\r\n\r\n<script>\r\nimport * as router from '../router'\r\nimport {mapState, mapActions} from 'vuex'\r\n\r\nexport default {\r\n  name: 'navibar',\r\n  data () {\r\n    return {\r\n      components: router.components,\r\n      pages: router.pages,\r\n    }\r\n  },\r\n  mounted() {\r\n    this.init()\r\n  },\r\n  computed: {\r\n    ...mapState(['userInformation', 'alertMessage', 'alertSuccess']),\r\n  },\r\n  methods: {\r\n    ...mapActions(['signInWith', 'signOut', 'checkUser']),\r\n    init: function(){\r\n      setTimeout(()=>{this.checkUser()},2000)\r\n    }\r\n  },\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/navibar.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-navbar',{attrs:{\"fixed\":\"top\",\"sticky\":\"\"}},[(_vm.userInformation !== undefined)?_c('b-navbar-nav',{staticClass:\"mr-auto\"},[(_vm.userInformation.shopId)?_c('b-dropdown',{attrs:{\"id\":\"ddown-left\",\"text\":\"功能表\"}},_vm._l((_vm.pages),function(page){return _c('b-dropdown-item',{key:page.key,attrs:{\"to\":(\"/\" + (page.key))}},[_vm._v(\"\\n        \"+_vm._s(page.name)+\"\\n      \")])})):_vm._e()],1):_vm._e(),_vm._v(\" \"),_c('b-navbar-nav',[(_vm.alertMessage)?_c('b-alert',{attrs:{\"show\":\"\"}},[_vm._v(_vm._s(_vm.alertMessage.message))]):_vm._e(),_vm._v(\" \"),(_vm.alertSuccess)?_c('b-alert',{attrs:{\"show\":\"\"}},[_vm._v(_vm._s(_vm.alertSuccess))]):_vm._e()],1),_vm._v(\" \"),_c('b-navbar-nav',{staticClass:\"ml-auto\"},[(_vm.userInformation === undefined)?_c('b-nav-item',[_c('b-button',{attrs:{\"variant\":\"outline-success\"},on:{\"click\":function($event){_vm.signInWith('google')}}},[_vm._v(\"Google登入\")]),_vm._v(\" \"),_c('b-button',{on:{\"click\":function($event){_vm.signInWith('anon')}}},[_vm._v(\"匿名登錄\")])],1):_c('b-nav-item',[_vm._v(\"\\n      \"+_vm._s(_vm.userInformation.displayName)+\"\\n      \"),_c('b-button',{attrs:{\"variant\":\"outline-danger\"},on:{\"click\":function($event){_vm.signOut()}}},[_vm._v(\"登出\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-298204c4\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/navibar.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div id=\"app\">\r\n    <navibar/>\r\n    <router-view v-if=\"userInformation !== undefined\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport navibar from '@/components/navibar.vue'\r\nimport { mapState } from 'vuex'\r\nexport default {\r\n  name: 'App',\r\n  components: { navibar },\r\n  computed: {\r\n    ...mapState(['userInformation'])\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n#app {\r\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  text-align: center;\r\n  color: #2c3e50;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./navibar.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./navibar.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-298204c4\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./navibar.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/navibar.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('navibar'),_vm._v(\" \"),(_vm.userInformation !== undefined)?_c('router-view'):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d59e2030\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d59e2030\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d59e2030\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import firebase from 'firebase/app'\r\nimport 'firebase/auth'\r\nimport 'firebase/firestore'\r\n\r\nconst config = {\r\n  apiKey: \"AIzaSyCxDUSrjbv_vMEica-94tY_k5N8pOkepVM\",\r\n  authDomain: \"authtest-4b972.firebaseapp.com\",\r\n  databaseURL: \"https://authtest-4b972.firebaseio.com\",\r\n  projectId: \"authtest-4b972\",\r\n}\r\n\r\nconst createFirebaseApi = ({ config }) => {\r\n  firebase.initializeApp(config)\r\n  return firebase\r\n}\r\n\r\nconst fb = createFirebaseApi({ config })\r\nfb.firestore().settings({ timestampsInSnapshots: true })\r\n\r\nexport class AuthCtrl {\r\n  constructor() {\r\n    this.provider = new firebase.auth.GoogleAuthProvider()\r\n    this.auth = fb.auth()\r\n  }\r\n\r\n  setPersistence = (type) => this.auth.setPersistence(fb.auth.Auth.Persistence[type])\r\n\r\n  authWithGoogle = () => this.auth.signInWithPopup(this.provider)\r\n\r\n  authWithAnon = () => this.auth.signInAnonymously()\r\n  \r\n  signOut = () => this.auth.signOut()\r\n  \r\n  getUser = () => this.auth.currentUser\r\n\r\n  filterUserInfo = (rawData) => {\r\n    let allow = [\r\n      \"uid\",\r\n      \"displayName\",\r\n      \"photoURL\",\r\n      \"email\",\r\n    ]\r\n    let filtered = Object.keys(rawData)\r\n    .filter(key => allow.includes(key))\r\n    .reduce((obj, key) => {\r\n      obj[key] = rawData[key]\r\n      return obj\r\n    }, {})\r\n    return filtered\r\n  }\r\n}\r\n\r\nexport class Firestore {\r\n  constructor() {\r\n  }\r\n\r\n  ref = (path) => {\r\n    let arr = path.split('/')\r\n    let reducer = arr.reduce((result, key, index)=>{\r\n      if((1+index) % 2) {\r\n        return result.collection(key)\r\n      } else {\r\n        return result.doc(key)\r\n      }\r\n    }, fb.firestore())\r\n    return reducer\r\n  }\r\n\r\n  timestamp = () => fb.firestore.FieldValue.serverTimestamp()\r\n\r\n  propDelete = () => fb.firestore.FieldValue.delete()\r\n  \r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/firebase.js","import {\r\n    CASHIER_RESPONSE,\r\n    SET_CARTS,\r\n    REMOVE_CART,\r\n    CHECKOUT_ITEM,\r\n    CHECKOUT_CART,\r\n    SET_USERINFO,\r\n    SET_ALERTMESSAGE,\r\n    SET_DATA,\r\n    SET_ALERTSUCCESS\r\n} from './mutation-types'\r\n\r\nexport default {\r\n    [SET_DATA](state, [container, payload]){\r\n        console.log([container, typeof payload])\r\n        state[container] = payload\r\n    },\r\n    [SET_ALERTSUCCESS](state, msg) {\r\n        state.alertSuccess = msg\r\n        setTimeout(()=>{ state.alertSuccess = null }, 5000)\r\n    },\r\n    [SET_ALERTMESSAGE](state, msg) {\r\n        state.alertMessage = msg\r\n        setTimeout(()=>{ state.alertMessage = null }, 5000)\r\n    },\r\n    [SET_USERINFO](state, obj) {\r\n        state.userInformation = obj\r\n        if(obj !== undefined){\r\n            state.login = true\r\n        }else{\r\n            state.login = false\r\n        }\r\n    },\r\n    [CHECKOUT_ITEM](state, obj) {\r\n        let index = state.cart.findIndex(item => {\r\n            return item.name === obj.name && item.specials_id === obj.specials_id\r\n        })\r\n        if(index == -1){\r\n            state.cart.push(obj)\r\n        } else {\r\n            // processing with parseInt is for b-table/input bug(prevent stringfy)\r\n            state.cart[index].number = parseInt(obj.number, 10) + parseInt(state.cart[index].number, 10)\r\n        }\r\n    },\r\n    [CHECKOUT_CART] (state) {\r\n        state.cart = []\r\n    },\r\n\r\n    [CASHIER_RESPONSE] (state, result) {\r\n        if(result === 'success'){\r\n            state.cashierOpened = true\r\n        } else {\r\n            state.cashierOpened = false\r\n        }\r\n    },\r\n    [SET_CARTS](state, [payload, type]) {\r\n\r\n        // for Firebase empty array missed\r\n        payload.forEach(e => {\r\n            e.items.forEach(e => {\r\n                if(!e.specials){\r\n                    e.specials = []\r\n                }\r\n            })\r\n        })\r\n\r\n        state.carts = payload\r\n    },\r\n    [REMOVE_CART](state, id) {\r\n        let res = state.carts.findIndex((e) => e.id === id)\r\n        if(res !== -1){\r\n            state.carts.splice(res, 1)\r\n        } else {\r\n            console.log('error')\r\n        }\r\n    },\r\n    ['SET_SHOPS'](state, [payload, type]) {\r\n        state.shops = payload\r\n    },\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/store/mutations.js","export const CASHIER_RESPONSE = 'CASHIER_RESPONSE'\r\nexport const SET_CARTS = 'SET_CARTS'\r\nexport const REMOVE_CART = 'REMOVE_CART'\r\nexport const CHECKOUT_ITEM = 'CHECKOUT_ITEM'\r\nexport const CHECKOUT_CART = 'CHECKOUT_CART'\r\nexport const SET_USERINFO = 'SET_USERINFO'\r\nexport const SET_ALERTMESSAGE = 'SET_ALERTMESSAGE'\r\nexport const SET_DATA = 'SET_DATA'\r\nexport const SET_ALERTSUCCESS = 'SET_ALERTSUCCESS'\n\n\n// WEBPACK FOOTER //\n// ./src/store/mutation-types.js","import {AuthCtrl, Firestore} from '../api/firebase'\r\nlet firestore = new Firestore()\r\nlet auth = new AuthCtrl()\r\n\r\nexport const signInWith = async({commit}, type) => {\r\n  try{\r\n    let res = null\r\n    let filtered = null\r\n    let userData = null\r\n    \r\n    if(checkUser({}) === true){ return }\r\n  \r\n    switch(type){\r\n      case 'google':\r\n        res = await auth.authWithGoogle()\r\n        break\r\n      case 'anon':\r\n        res = await auth.authWithAnon()\r\n        break\r\n      default:\r\n        return\r\n    }\r\n  \r\n    if(res){\r\n      filtered = auth.filterUserInfo(res.user)\r\n      auth.setPersistence('LOCAL')\r\n      userData = await fbGet({}, [`users/${res.user.uid}`])\r\n  \r\n      if(userData){\r\n        commit('SET_USERINFO', userData)\r\n      } else {\r\n        let user = Object.assign(filtered, {identity: null})\r\n\r\n        fbPost({}, [`users/${user.uid}`, user])\r\n        .then(()=>{\r\n          commit('SET_USERINFO', user)\r\n        })\r\n      }\r\n    }\r\n  }catch(err){\r\n    commit('SET_ALERTMESSAGE', err)\r\n  }\r\n}\r\n\r\nexport const signOut = async({commit}) => {\r\n  try{\r\n    commit('SET_USERINFO', await auth.signOut())\r\n    commit('SET_DATA', ['items', []])\r\n    commit('SET_DATA', ['carts', []])\r\n    commit('SET_DATA', ['my_shop', null])    \r\n  }catch(err){\r\n    commit('SET_ALERTMESSAGE', err)\r\n  }\r\n}\r\n\r\nexport const checkUser = async({commit}) => {\r\n  try{\r\n    if(auth.getUser() !== null){\r\n      let userData = await fbGet({}, [`users/${auth.getUser().uid}`])\r\n      commit('SET_USERINFO', userData)\r\n      if(userData.shopId !== null){\r\n        fbGet({commit}, [`shops/${userData.shopId}`, 'my_shop'])\r\n      }\r\n      return true\r\n    } else {\r\n      return false\r\n    }\r\n  }catch(err){\r\n    commit('SET_ALERTMESSAGE', err)\r\n    console.error(err)\r\n  }\r\n}\r\n\r\nexport const fbGet = async({commit}, [path, container]) => {\r\n  try{\r\n    let res = null\r\n    if(typeof path === 'object'){\r\n      console.log(`Access query: {ref} GET`)\r\n      res = await path.get()\r\n    } else {\r\n      console.log(`Access path: ${path} GET`)\r\n      res = await firestore.ref(path).get()\r\n    }\r\n    if(res){\r\n      res = docReader(res)\r\n      console.log([path, res, `container: ${container}`])\r\n      if(container){\r\n        console.log([`commit to container`, res])\r\n        commit('SET_DATA', [container, res])\r\n      } else {\r\n        return res\r\n      }\r\n    } else {\r\n      return null\r\n    }\r\n  } catch(err) { return err }\r\n}\r\n\r\nexport const fbPost = async({commit}, [path, item]) => {\r\n  try{\r\n    console.log(`Access path: ${path} POST`)\r\n    let ref = firestore.ref(path)\r\n    Object.assign(item, {date: firestore.timestamp()})\r\n    if('set' in ref){\r\n      return ref.set(item)\r\n    }else {\r\n      return ref.add(item)\r\n    }\r\n  } catch(err) { return err }\r\n}\r\n\r\nexport const fbUpdate = async({commit}, [path, payload]) => {\r\n  try{\r\n    console.log(`Access path: ${path} UPDATE`)\r\n    for(let prop in payload.roles){\r\n      if(payload.roles[prop] === 'fb.firestore.FieldValue.delete'){\r\n        payload.roles[prop] = firestore.timestamp() //.propDelete() can't work but .timestamp() works ?\r\n      }\r\n    }\r\n    Object.assign(payload, {last_update: firestore.timestamp()})\r\n    let res = await firestore.ref(path).update(payload)\r\n    if(res === undefined){\r\n      commit('SET_ALERTSUCCESS', '更新成功')\r\n    }\r\n    return res\r\n  } catch(err) { return err }\r\n}\r\n\r\nexport const fbDelete = async({commit}, [path]) => {\r\n  try{\r\n    console.log(`Access path: ${path} DELETE`)\r\n    let res = await firestore.ref(path).delete()\r\n    if(res === undefined){\r\n      commit('SET_ALERTSUCCESS', '刪除成功')\r\n    }\r\n    return res\r\n  } catch(err) { return err }\r\n}\r\n\r\nexport const fbQuery = async({commit}, [path, query, container]) => {\r\n  query = query.split('_')\r\n  console.log(['query path', query])\r\n  let result = await firestore.ref(path).where(query[0], query[1], query[2])\r\n  if(result){\r\n    console.log(['fbQuery pass result', result])\r\n    return fbGet({commit}, [result, container])\r\n  } else {\r\n    console.log('notFound')\r\n    return null\r\n  }\r\n}\r\n\r\nconst docReader = (res) => {\r\n  if('docs' in res){\r\n    let payload = []\r\n    res.forEach(doc => {\r\n      let obj = doc.data()\r\n      obj.id = doc.id\r\n      payload.push(obj)\r\n    })\r\n    res = payload\r\n  } else {\r\n    if(res.exists){\r\n      res = res.data()\r\n    } else {\r\n      res = null\r\n    }\r\n  }\r\n  return res\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/store/actions.js","import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\nimport mutations from './mutations'\r\nimport * as actions from './actions'\r\n\r\nVue.use(Vuex)\r\n\r\nconst state = {\r\n\titems: [],\r\n\tcart: [],\r\n\tcarts: [],\r\n\tshops: [],\r\n\tmy_shop: null,\r\n\tcashierOpened: false,\r\n\tuserInformation: undefined,\r\n\talertMessage: null,\r\n\talertSuccess: null,\r\n\tlogin: null,\r\n}\r\n\r\nexport default new Vuex.Store({\r\n\tstate,\r\n\tmutations,\r\n\tactions,\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","// The Vue build version to load with the `import` command\r\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\r\nimport Vue from 'vue'\r\nimport App from './App'\r\nimport { router } from './router'\r\nimport store from './store'\r\n\r\nimport BootstrapVue from 'bootstrap-vue'\r\nimport 'bootstrap/dist/css/bootstrap.css'\r\nimport 'bootstrap-vue/dist/bootstrap-vue.css'\r\nVue.use(BootstrapVue);\r\n\r\nVue.config.productionTip = false\r\n\r\n/* eslint-disable no-new */\r\nnew Vue({\r\n  el: '#app',\r\n  router,\r\n  store,\r\n  components: { App },\r\n  template: '<App/>'\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}