webpackJsonp([5],{MEtx:function(e,t){},n7mW:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("woOf"),n=s.n(i),c=s("fZjL"),a=s.n(c),r=s("Dd8w"),o=s.n(r),u=s("NYxO"),l={name:"ItemCard",components:{CustomList:s("RFjD").default},data:function(){return{selected:null,products:null}},mounted:function(){this.init()},computed:o()({},Object(u.d)(["userInformation","items"]),{fetched:function(){return!!this.items&&(this.feedProducts(),!0)}}),methods:o()({},Object(u.b)(["fbGet"]),Object(u.c)(["CHECKOUT_ITEM"]),{feedProducts:function(){var e={};this.items.forEach(function(t){void 0!==t.specials&&t.specials.forEach(function(e){return e.price=parseInt(e.price,10)}),e[t.name]={id:t.id,name:t.name,price:parseInt(t.price,10),price_total:0,specials:t.specials,specials_price_total:0,specials_selected:[],number:0,is_selected:!1}}),this.products=e;for(var t=a()(this.products),s=0;s<t.length;s+=1)void 0!==this.products[t[s]].specials&&this.products[t[s]].specials.forEach(function(e){n()(e,{is_selected:!1})})},specialAdd:function(e){var t=e.specials.reduce(function(e,t){if(t.is_selected){var s={name:t.name,price:t.price};e.arr.push(s),e.num+=t.price}return e},{arr:[],num:0});e.specials_selected=t.arr,e.specials_price_total=t.num,this.calculatePriceTotal(e)},init:function(){this.getShopItem()},getShopItem:function(){this.fbGet(["shops/"+this.userInformation.shopId+"/items","items"])},select:function(e){var t=this;a()(this.products).forEach(function(e){return t.products[e].is_selected=!1}),this.products[e].is_selected=!0,this.selected=e},changeNumber:function(e,t){switch(e){case"plus":t.number+=1;break;case"minus":t.number>0&&(t.number-=1)}this.calculatePriceTotal(t)},calculatePriceTotal:function(e){e.price_total=e.specials_price_total+e.price},addToCart:function(e){var t="";e.specials_selected.length>0&&e.specials_selected.forEach(function(e){t+=e.name});var s={name:e.name,specials_id:t,specials:e.specials_selected,number:e.number,price:e.price_total};this.CHECKOUT_ITEM(s),this.feedProducts()}})},d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.fetched?s("div",[Object.keys(e.products).length?e._l(e.products,function(t,i){return s("b-card",{key:i,attrs:{"body-bg-variant":t.is_selected?"light":"white","text-variant":t.is_selected?"primary":"dark"},on:{click:function(s){e.select(t.name)}}},[s("p",{staticClass:"name"},[e._v("\n        "+e._s(t.name)+": "+e._s(t.price)+"$"),t.specials_price_total>0?s("span",{staticClass:"name-tag"},[e._v("+"+e._s(t.specials_price_total))]):e._e()]),e._v(" "),s("h2",[s("b-button",{attrs:{variant:"outline-primary"},on:{click:function(s){e.changeNumber("plus",t)}}},[e._v("＋")]),e._v("\n          "+e._s(t.number)+"\n        "),s("b-button",{attrs:{variant:"outline-primary"},on:{click:function(s){e.changeNumber("minus",t)}}},[e._v("－")]),e._v(" "),s("b-button",{attrs:{disabled:!Boolean(t.number),variant:Boolean(t.number)?"danger":"outline-danger"},on:{click:function(s){e.addToCart(t)}}},[e._v("🛒")])],1),e._v(" "),s("Custom-list",{attrs:{item:t}},[e._v("i am here to help child re-render when props change but never show up")])],1)}):s("b-card",[s("h1",[e._v("沒有商品，請至設定頁面確認")]),s("b-link",{attrs:{to:"Settings"}},[e._v("點我")])],1)],2):s("div",[s("b-button",{on:{click:e.getShopItem}},[e._v("取得商品清單")])],1)])},staticRenderFns:[]};var p=s("VU/8")(l,d,!1,function(e){s("MEtx")},"data-v-502da4ce",null);t.default=p.exports}});
//# sourceMappingURL=5.3db39083697fff5b2748.js.map