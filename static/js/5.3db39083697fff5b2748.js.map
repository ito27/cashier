{"version":3,"sources":["webpack:///src/components/ItemCard.vue","webpack:///./src/components/ItemCard.vue?a83a","webpack:///./src/components/ItemCard.vue"],"names":["ItemCard","name","components","CustomList","data","selected","products","mounted","this","init","computed","extends_default","Object","vuex_esm","fetched","items","feedProducts","methods","obj","forEach","e","undefined","specials","sp","price","parseInt","id","price_total","specials_price_total","specials_selected","number","is_selected","keys","keys_default","i","length","assign_default","specialAdd","item","reducer","reduce","result","arr","push","num","calculatePriceTotal","getShopItem","fbGet","userInformation","shopId","select","_this","changeNumber","type","addToCart","spid","specials_id","CHECKOUT_ITEM","components_ItemCard","render","_vm","_h","$createElement","_c","_self","_l","index","key","attrs","body-bg-variant","text-variant","on","click","$event","staticClass","_v","_s","_e","variant","disabled","Boolean","to","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.3db39083697fff5b2748.js","sourcesContent":["<template>\r\n  <div>\r\n    <div v-if=\"!fetched\">\r\n      <b-button @click=\"getShopItem\">ÂèñÂæóÂïÜÂìÅÊ∏ÖÂñÆ</b-button>\r\n    </div>\r\n    <div v-else>\r\n      <b-card v-if=\"!Object.keys(products).length\">\r\n        <h1>Ê≤íÊúâÂïÜÂìÅÔºåË´ãËá≥Ë®≠ÂÆöÈ†ÅÈù¢Á¢∫Ë™ç</h1><b-link to=\"Settings\">ÈªûÊàë</b-link>\r\n      </b-card>\r\n      <b-card\r\n      v-else\r\n      v-for=\"(item, index) in products\" :key=\"index\"\r\n      :body-bg-variant=\"item.is_selected ? 'light':'white'\" \r\n      :text-variant=\"item.is_selected ? 'primary':'dark'\"\r\n      @click=\"select(item.name)\">\r\n        <p class=\"name\">\r\n          {{ item.name }}: {{ item.price }}$<span class=\"name-tag\" v-if=\"item.specials_price_total > 0\">+{{item.specials_price_total}}</span>\r\n        </p>\r\n        <h2>\r\n          <b-button @click=\"changeNumber('plus', item)\" variant=\"outline-primary\">Ôºã</b-button>\r\n            {{ item.number }}\r\n          <b-button @click=\"changeNumber('minus', item)\" variant=\"outline-primary\">Ôºç</b-button>\r\n          <b-button @click=\"addToCart(item)\" :disabled=\"!Boolean(item.number)\" :variant=\"!Boolean(item.number)?'outline-danger':'danger'\">üõí</b-button>\r\n        </h2>\r\n        <Custom-list :item=\"item\">i am here to help child re-render when props change but never show up</Custom-list>\r\n      </b-card>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapState, mapActions, mapMutations} from 'vuex'\r\nimport CustomList from '@/components/CustomList'\r\nexport default {\r\n  name: 'ItemCard',\r\n  components: { CustomList },\r\n  data () {\r\n    return {\r\n      selected: null,\r\n      products: null,\r\n    }\r\n  },\r\n  mounted () {\r\n    this.init()\r\n  },\r\n  computed: {\r\n    ...mapState([\r\n      'userInformation','items'\r\n    ]),\r\n    fetched: function() {\r\n      if(this.items){\r\n        this.feedProducts()\r\n        return true\r\n      } else {\r\n        return false\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    ...mapActions(['fbGet']),\r\n    ...mapMutations(['CHECKOUT_ITEM']),\r\n    feedProducts: function () {\r\n      let obj = {}\r\n        this.items.forEach(e => {\r\n          if(e.specials !== undefined){\r\n            e.specials.forEach(sp => sp.price = parseInt(sp.price, 10))\r\n          }\r\n          obj[e.name] = {\r\n            id: e.id,\r\n            name: e.name,\r\n            price: parseInt(e.price, 10),\r\n            price_total: 0,\r\n            specials: e.specials,\r\n            specials_price_total: 0,\r\n            specials_selected: [],\r\n            number: 0,\r\n            is_selected: false\r\n          }\r\n        })\r\n      this.products = obj\r\n      //\r\n      let keys = Object.keys(this.products)\r\n      for(let i = 0; i < keys.length; i+=1){\r\n        if(this.products[keys[i]].specials !== undefined){\r\n          this.products[keys[i]].specials.forEach(e => {\r\n            Object.assign(e, {is_selected: false})\r\n          })\r\n        }\r\n      }\r\n    },\r\n    specialAdd: function (item) {\r\n      let reducer = item.specials.reduce(function (result, e) {\r\n        if(e.is_selected) {\r\n          let obj = {\r\n            name: e.name,\r\n            price: e.price\r\n          }\r\n          result.arr.push(obj)\r\n          result.num += e.price\r\n        }\r\n        return result\r\n      }, {\r\n        arr: [],\r\n        num: 0\r\n      })\r\n\r\n      item.specials_selected = reducer.arr\r\n      item.specials_price_total = reducer.num\r\n\r\n      this.calculatePriceTotal(item)\r\n    },\r\n    init(){\r\n      this.getShopItem();\r\n    },\r\n    getShopItem: function() {\r\n      this.fbGet([`shops/${this.userInformation.shopId}/items`, 'items'])\r\n    },\r\n    select: function(name) {\r\n      Object.keys(this.products).forEach(e => this.products[e].is_selected = false)\r\n      this.products[name].is_selected = true\r\n      this.selected = name\r\n    },\r\n    changeNumber: function(type, item) {\r\n      switch(type){\r\n        case 'plus':\r\n          item.number += 1\r\n          break\r\n        case 'minus':\r\n          if(item.number > 0){\r\n            item.number -= 1\r\n          }\r\n          break\r\n      }\r\n      this.calculatePriceTotal(item)\r\n    },\r\n    calculatePriceTotal: function(item) {\r\n      item.price_total = item.specials_price_total + item.price\r\n    },\r\n    addToCart: function(item) {\r\n      let spid = ''\r\n      if(item.specials_selected.length > 0){\r\n        item.specials_selected.forEach(e => {\r\n          spid += e.name\r\n        })\r\n      }\r\n\r\n      let obj = {\r\n        name: item.name,\r\n        specials_id: spid,\r\n        specials: item.specials_selected,\r\n        number: item.number,\r\n        price: item.price_total,\r\n      }\r\n      this.CHECKOUT_ITEM(obj)\r\n      this.feedProducts()\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\np\r\n  white-space nowrap\r\n.name\r\n  font-size 2em\r\n.name-tag\r\n  font-size .5em\r\n  color red\r\n  border 1px solid black\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/ItemCard.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(!_vm.fetched)?_c('div',[_c('b-button',{on:{\"click\":_vm.getShopItem}},[_vm._v(\"ÂèñÂæóÂïÜÂìÅÊ∏ÖÂñÆ\")])],1):_c('div',[(!Object.keys(_vm.products).length)?_c('b-card',[_c('h1',[_vm._v(\"Ê≤íÊúâÂïÜÂìÅÔºåË´ãËá≥Ë®≠ÂÆöÈ†ÅÈù¢Á¢∫Ë™ç\")]),_c('b-link',{attrs:{\"to\":\"Settings\"}},[_vm._v(\"ÈªûÊàë\")])],1):_vm._l((_vm.products),function(item,index){return _c('b-card',{key:index,attrs:{\"body-bg-variant\":item.is_selected ? 'light':'white',\"text-variant\":item.is_selected ? 'primary':'dark'},on:{\"click\":function($event){_vm.select(item.name)}}},[_c('p',{staticClass:\"name\"},[_vm._v(\"\\n        \"+_vm._s(item.name)+\": \"+_vm._s(item.price)+\"$\"),(item.specials_price_total > 0)?_c('span',{staticClass:\"name-tag\"},[_vm._v(\"+\"+_vm._s(item.specials_price_total))]):_vm._e()]),_vm._v(\" \"),_c('h2',[_c('b-button',{attrs:{\"variant\":\"outline-primary\"},on:{\"click\":function($event){_vm.changeNumber('plus', item)}}},[_vm._v(\"Ôºã\")]),_vm._v(\"\\n          \"+_vm._s(item.number)+\"\\n        \"),_c('b-button',{attrs:{\"variant\":\"outline-primary\"},on:{\"click\":function($event){_vm.changeNumber('minus', item)}}},[_vm._v(\"Ôºç\")]),_vm._v(\" \"),_c('b-button',{attrs:{\"disabled\":!Boolean(item.number),\"variant\":!Boolean(item.number)?'outline-danger':'danger'},on:{\"click\":function($event){_vm.addToCart(item)}}},[_vm._v(\"üõí\")])],1),_vm._v(\" \"),_c('Custom-list',{attrs:{\"item\":item}},[_vm._v(\"i am here to help child re-render when props change but never show up\")])],1)})],2)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-502da4ce\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ItemCard.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-502da4ce\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ItemCard.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ItemCard.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ItemCard.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-502da4ce\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ItemCard.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-502da4ce\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ItemCard.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}