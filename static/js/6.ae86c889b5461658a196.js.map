{"version":3,"sources":["webpack:///src/components/checkout.vue","webpack:///./src/components/checkout.vue?0f59","webpack:///./src/components/checkout.vue"],"names":["checkout","name","components","NumPad","props","cart","type","Array","default","btnStats","data","key_type","price","cash","stat","cash_mode","computed","extends_default","Object","vuex_esm","summary","result","this","reduce","item","items","push","number","checkoutDisable","statCheck","length","cartCheck","cashCheck","changeCheck","methods","setStat","checkoutCart","_ref","asyncToGenerator_default","regenerator_default","a","mark","_callee","_this","wrap","_context","prev","next","fbPost","userInformation","shopId","sent","id","keys_default","$data","forEach","e","CHECKOUT_CART","stop","_x","apply","arguments","components_checkout","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","staticStyle","background","on","click","$event","attrs","variant","keyType","touchBtn","confrim","equal","_e","style","_l","index","key","disabled","$emit","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/6.ae86c889b5461658a196.js","sourcesContent":["<template>\r\n  <div>\r\n    <div v-if=\"cash_mode\">\r\n      <div class=\"container\">\r\n        <div class=\"name\">總價</div>\r\n        <div class=\"value\">{{ summary.price }}</div>\r\n        <div class=\"name\">現金</div>\r\n        <div class=\"value\" @click=\"cash_mode = true\" style=\"background: pink\">{{ cash }}</div>\r\n        <b-button @click=\"key_type = 'ten'\" :variant=\"key_type === 'ten' ? 'success':'light'\">數字鍵盤</b-button>\r\n        <b-button @click=\"key_type = 'int'\" :variant=\"key_type === 'int' ? 'success':'light'\">整數</b-button>\r\n      </div>\r\n      <b-card>\r\n        <Num-pad :keyType=\"key_type\" @touchBtn=\"cash = $event\" @confrim=\"cash_mode = false\" @equal=\"cash = price\"></Num-pad>\r\n      </b-card>\r\n    </div>\r\n    <div v-if=\"!cash_mode\">\r\n      <div class=\"container\">\r\n        <div class=\"name\">總價</div>\r\n        <div class=\"value\">{{ summary.price }}</div>\r\n        <div class=\"name\">\r\n          現金\r\n        </div>\r\n        <b-button class=\"value\" @click=\"cash_mode = true\" variant=\"outline-danger\">\r\n          {{ cash }}\r\n        </b-button>\r\n      </div>\r\n      <div class=\"container\" v-if=\"cash - summary.price > 0\">\r\n        <div class=\"name\">找零</div>\r\n        <div class=\"value\" :style=\"(cash - summary.price < 1000) ? 'color: blue' : 'background: red'\">{{ cash - summary.price }}</div>\r\n      </div>\r\n      <div class=\"container\">\r\n        <div>\r\n          <b-button class=\"value\" v-for=\"(item, index) in btnStats\" :key=\"index\" @click=\"setStat(item)\" :variant=\"stat === item ? 'danger':'light'\">{{ item }}</b-button>\r\n        </div>\r\n        <b-button class=\"value\" @click=\"checkoutCart(summary), $emit('checkout')\" :disabled=\"checkoutDisable\" :variant=\"!checkoutDisable ? 'success':'light'\">結帳</b-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapMutations, mapActions, mapState } from 'vuex'\r\nimport NumPad from '@/components/NumPad'\r\n\r\nexport default {\r\n  name: 'checkout',\r\n  components: { NumPad },\r\n  props: {\r\n    cart: {\r\n      type: Array,\r\n      default: () => []\r\n      },\r\n    btnStats: {\r\n      type: Array,\r\n      default: () => ['外帶', '內用']\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      key_type: 'int',\r\n      price: null,\r\n      cash: 0,\r\n      stat: null,\r\n      cash_mode: false,\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(['userInformation']),\r\n    summary: function () {\r\n      let result = this.cart\r\n        .reduce((result, item) => {\r\n          result.items.push(item)\r\n          result.price += ( item.price * item.number )\r\n          return result\r\n        },\r\n          {\r\n            items: [],\r\n            price: 0,\r\n            cash: this.cash, // cash here\r\n            stat: this.stat\r\n          }\r\n        )\r\n      this.price = result.price\r\n      return result\r\n    },\r\n    checkoutDisable: function () {\r\n      let statCheck = this.stat || this.btnStats.length === 0\r\n      let cartCheck = this.cart.length > 0\r\n      let cashCheck = this.cash - this.price >= 0\r\n      let changeCheck = this.cash - this.price < 1000\r\n      return !(statCheck && cartCheck && cashCheck && changeCheck)\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations(['CHECKOUT_CART']),\r\n    ...mapActions(['fbPost']),\r\n    setStat: function (stat) {\r\n      this.stat = stat\r\n    },\r\n    checkoutCart: async function (summary) {\r\n      let res = await this.fbPost([`shops/${this.userInformation.shopId}/carts`, summary])\r\n      if(res.id){\r\n        Object.keys(this.$data).forEach(e => this.$data[e] = null)\r\n        this.CHECKOUT_CART()\r\n      }\r\n    }\r\n  },\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n.container\r\n  display grid || inline-grid\r\n  grid-template-columns 1fr 1fr\r\n.name\r\n.value\r\n  border .1em double black\r\n  font-size 2em\r\n  text-shadow 0 1px 1px rgba(0, 0, 0, 0.9)\r\n.name\r\n  color black\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/checkout.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.cash_mode)?_c('div',[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"name\"},[_vm._v(\"總價\")]),_vm._v(\" \"),_c('div',{staticClass:\"value\"},[_vm._v(_vm._s(_vm.summary.price))]),_vm._v(\" \"),_c('div',{staticClass:\"name\"},[_vm._v(\"現金\")]),_vm._v(\" \"),_c('div',{staticClass:\"value\",staticStyle:{\"background\":\"pink\"},on:{\"click\":function($event){_vm.cash_mode = true}}},[_vm._v(_vm._s(_vm.cash))]),_vm._v(\" \"),_c('b-button',{attrs:{\"variant\":_vm.key_type === 'ten' ? 'success':'light'},on:{\"click\":function($event){_vm.key_type = 'ten'}}},[_vm._v(\"數字鍵盤\")]),_vm._v(\" \"),_c('b-button',{attrs:{\"variant\":_vm.key_type === 'int' ? 'success':'light'},on:{\"click\":function($event){_vm.key_type = 'int'}}},[_vm._v(\"整數\")])],1),_vm._v(\" \"),_c('b-card',[_c('Num-pad',{attrs:{\"keyType\":_vm.key_type},on:{\"touchBtn\":function($event){_vm.cash = $event},\"confrim\":function($event){_vm.cash_mode = false},\"equal\":function($event){_vm.cash = _vm.price}}})],1)],1):_vm._e(),_vm._v(\" \"),(!_vm.cash_mode)?_c('div',[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"name\"},[_vm._v(\"總價\")]),_vm._v(\" \"),_c('div',{staticClass:\"value\"},[_vm._v(_vm._s(_vm.summary.price))]),_vm._v(\" \"),_c('div',{staticClass:\"name\"},[_vm._v(\"\\n        現金\\n      \")]),_vm._v(\" \"),_c('b-button',{staticClass:\"value\",attrs:{\"variant\":\"outline-danger\"},on:{\"click\":function($event){_vm.cash_mode = true}}},[_vm._v(\"\\n        \"+_vm._s(_vm.cash)+\"\\n      \")])],1),_vm._v(\" \"),(_vm.cash - _vm.summary.price > 0)?_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"name\"},[_vm._v(\"找零\")]),_vm._v(\" \"),_c('div',{staticClass:\"value\",style:((_vm.cash - _vm.summary.price < 1000) ? 'color: blue' : 'background: red')},[_vm._v(_vm._s(_vm.cash - _vm.summary.price))])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"container\"},[_c('div',_vm._l((_vm.btnStats),function(item,index){return _c('b-button',{key:index,staticClass:\"value\",attrs:{\"variant\":_vm.stat === item ? 'danger':'light'},on:{\"click\":function($event){_vm.setStat(item)}}},[_vm._v(_vm._s(item))])})),_vm._v(\" \"),_c('b-button',{staticClass:\"value\",attrs:{\"disabled\":_vm.checkoutDisable,\"variant\":!_vm.checkoutDisable ? 'success':'light'},on:{\"click\":function($event){_vm.checkoutCart(_vm.summary), _vm.$emit('checkout')}}},[_vm._v(\"結帳\")])],1)]):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-491120c9\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/checkout.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-491120c9\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./checkout.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./checkout.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./checkout.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-491120c9\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./checkout.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-491120c9\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/checkout.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}