webpackJsonp([6],{"+sgj":function(t,s){},N4Va:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("Xxa5"),n=a.n(e),c=a("fZjL"),i=a.n(c),r=a("exGp"),u=a.n(r),o=a("Dd8w"),v=a.n(o),l=a("NYxO"),h={name:"checkout",components:{NumPad:a("RZGl").default},props:{cart:{type:Array,default:function(){return[]}},btnStats:{type:Array,default:function(){return["外帶","內用"]}}},data:function(){return{key_type:"int",price:null,cash:0,stat:null,cash_mode:!1}},computed:v()({},Object(l.d)(["userInformation"]),{summary:function(){var t=this.cart.reduce(function(t,s){return t.items.push(s),t.price+=s.price*s.number,t},{items:[],price:0,cash:this.cash,stat:this.stat});return this.price=t.price,t},checkoutDisable:function(){var t=this.stat||0===this.btnStats.length,s=this.cart.length>0,a=this.cash-this.price>=0,e=this.cash-this.price<1e3;return!(t&&s&&a&&e)}}),methods:v()({},Object(l.c)(["CHECKOUT_CART"]),Object(l.b)(["fbPost"]),{setStat:function(t){this.stat=t},checkoutCart:function(){var t=u()(n.a.mark(function t(s){var a=this;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fbPost(["shops/"+this.userInformation.shopId+"/carts",s]);case 2:t.sent.id&&(i()(this.$data).forEach(function(t){return a.$data[t]=null}),this.CHECKOUT_CART());case 4:case"end":return t.stop()}},t,this)}));return function(s){return t.apply(this,arguments)}}()})},_={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[t.cash_mode?a("div",[a("div",{staticClass:"container"},[a("div",{staticClass:"name"},[t._v("總價")]),t._v(" "),a("div",{staticClass:"value"},[t._v(t._s(t.summary.price))]),t._v(" "),a("div",{staticClass:"name"},[t._v("現金")]),t._v(" "),a("div",{staticClass:"value",staticStyle:{background:"pink"},on:{click:function(s){t.cash_mode=!0}}},[t._v(t._s(t.cash))]),t._v(" "),a("b-button",{attrs:{variant:"ten"===t.key_type?"success":"light"},on:{click:function(s){t.key_type="ten"}}},[t._v("數字鍵盤")]),t._v(" "),a("b-button",{attrs:{variant:"int"===t.key_type?"success":"light"},on:{click:function(s){t.key_type="int"}}},[t._v("整數")])],1),t._v(" "),a("b-card",[a("Num-pad",{attrs:{keyType:t.key_type},on:{touchBtn:function(s){t.cash=s},confrim:function(s){t.cash_mode=!1},equal:function(s){t.cash=t.price}}})],1)],1):t._e(),t._v(" "),t.cash_mode?t._e():a("div",[a("div",{staticClass:"container"},[a("div",{staticClass:"name"},[t._v("總價")]),t._v(" "),a("div",{staticClass:"value"},[t._v(t._s(t.summary.price))]),t._v(" "),a("div",{staticClass:"name"},[t._v("\n        現金\n      ")]),t._v(" "),a("b-button",{staticClass:"value",attrs:{variant:"outline-danger"},on:{click:function(s){t.cash_mode=!0}}},[t._v("\n        "+t._s(t.cash)+"\n      ")])],1),t._v(" "),t.cash-t.summary.price>0?a("div",{staticClass:"container"},[a("div",{staticClass:"name"},[t._v("找零")]),t._v(" "),a("div",{staticClass:"value",style:t.cash-t.summary.price<1e3?"color: blue":"background: red"},[t._v(t._s(t.cash-t.summary.price))])]):t._e(),t._v(" "),a("div",{staticClass:"container"},[a("div",t._l(t.btnStats,function(s,e){return a("b-button",{key:e,staticClass:"value",attrs:{variant:t.stat===s?"danger":"light"},on:{click:function(a){t.setStat(s)}}},[t._v(t._s(s))])})),t._v(" "),a("b-button",{staticClass:"value",attrs:{disabled:t.checkoutDisable,variant:t.checkoutDisable?"light":"success"},on:{click:function(s){t.checkoutCart(t.summary),t.$emit("checkout")}}},[t._v("結帳")])],1)])])},staticRenderFns:[]};var d=a("VU/8")(h,_,!1,function(t){a("+sgj")},"data-v-491120c9",null);s.default=d.exports}});
//# sourceMappingURL=6.ae86c889b5461658a196.js.map