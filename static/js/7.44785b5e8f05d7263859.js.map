{"version":3,"sources":["webpack:///src/page/CartsTable.vue","webpack:///./src/page/CartsTable.vue?30a1","webpack:///./src/page/CartsTable.vue"],"names":["CartsTable","name","components","cart","props","manage","data","fields","key","label","mounted","this","init","computed","extends_default","Object","vuex_esm","methods","getShopCart","fbGet","userInformation","shopId","getTime","millis","date","Date","date_string","getFullYear","getMonth","getDate","time_num","getHours","getMinutes","getSeconds","time_str","time_string","index","deleteCart","id","_this","fbDelete","then","$store","commit","page_CartsTable","render","_vm","_h","$createElement","_c","_self","carts","length","attrs","responsive","items","scopedSlots","_u","fn","row","staticClass","_v","_s","item","stat","price","variant","on","click","toggleDetails","detailsShowing","orderable","numberVariable","$event","_e","seconds","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"+JA6BAA,GACAC,KAAA,aACAC,YAAAC,eAAA,SACAC,OACAC,QAAA,GAEAC,KANA,WAOA,OACAC,SACAC,IAAA,OAAAC,MAAA,OACAD,IAAA,QAAAC,MAAA,OACAD,IAAA,OAAAC,MAAA,OACAD,IAAA,SAAAC,MAAA,OAIAC,QAhBA,WAiBAC,KAAAC,QAEAC,SAAAC,OACAC,OAAAC,EAAA,EAAAD,EAAA,6BAEAE,QAAAH,OACAC,OAAAC,EAAA,EAAAD,EAAA,sBACAH,KAFA,WAGAD,KAAAO,eAEAA,YAAA,WACAP,KAAAQ,OAAA,SAAAR,KAAAS,gBAAAC,OAAA,oBAEAC,QARA,SAQAC,GACA,IAAAC,EAAA,IAAAC,KAAAF,GACAG,EAAAF,EAAAG,cAAA,KAAAH,EAAAI,WAAA,OAAAJ,EAAAK,UAAA,IACAC,GACAN,EAAAO,WACAP,EAAAQ,aACAR,EAAAS,cAEAC,GAAA,YACAC,EAAA,GACA,QAAAC,KAAAN,EAEAK,EADAL,EAAAM,GAAA,GACAD,EAAA,IAAAL,EAAAM,GAAAF,EAAAE,GAEAD,EAAAL,EAAAM,GAAAF,EAAAE,GAGA,OAAAV,EAAAS,IAEAE,WA3BA,SA2BAC,GAAA,IAAAC,EAAA5B,KACAA,KAAA6B,UAAA,SAAA7B,KAAAS,gBAAAC,OAAA,UAAAiB,MAAAG,KAAA,WACAF,EAAAG,OAAAC,OAAA,cAAAL,SC7EAM,GADiBC,OAFjB,WAA0B,IAAAC,EAAAnC,KAAaoC,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAH,EAAAK,MAAAC,OAAA,EAAAH,EAAA,OAAAA,EAAA,WAAgEI,OAAOC,WAAA,GAAAC,MAAAT,EAAAK,MAAA5C,OAAAuC,EAAAvC,QAAsDiD,YAAAV,EAAAW,KAAsBjD,IAAA,QAAAkD,GAAA,SAAAC,GAA6B,OAAAV,EAAA,KAAgBW,YAAA,SAAmBd,EAAAe,GAAAf,EAAAgB,GAAAH,EAAAI,KAAAC,MAAA,IAAAlB,EAAAgB,GAAAH,EAAAI,KAAAE,OAAA,OAAAnB,EAAAe,GAAA,KAAAZ,EAAA,YAA4FI,OAAOa,QAAA,mBAA4BC,IAAKC,MAAAT,EAAAU,iBAA2BvB,EAAAe,GAAAf,EAAAgB,GAAAH,EAAAW,eAAA,YAAArB,EAAA,WAAAH,EAAAe,GAAAf,EAAAgB,GAAAH,EAAAI,KAAAR,MAAAH,YAAA,OAA+G5C,IAAA,cAAAkD,GAAA,SAAAC,GAAmC,OAAAV,EAAA,QAAmBI,OAAOlD,KAAAwD,EAAAI,KAAAR,MAAAgB,WAAA,EAAAC,gBAAA,SAAsEhE,IAAA,SAAAkD,GAAA,SAAAC,GAA8B,OAAAb,EAAA,OAAAG,EAAA,YAAoCkB,IAAIC,MAAA,SAAAK,GAAyB3B,EAAAT,WAAAsB,EAAAI,KAAAzB,QAA8BQ,EAAAe,GAAA,QAAAf,EAAA4B,SAA8BlE,IAAA,OAAAkD,GAAA,SAAAC,GAA4B,OAAAV,EAAA,KAAgBW,YAAA,SAAmBd,EAAAe,GAAAf,EAAAgB,GAAAhB,EAAAxB,QAAA,IAAAqC,EAAAI,KAAAvC,KAAAmD,SAAA,OAAA7B,EAAAe,GAAA,KAAAZ,EAAA,KAAmFW,YAAA,SAAmBd,EAAAe,GAAAf,EAAAgB,GAAAhB,EAAAxB,QAAA,IAAAqC,EAAAI,KAAAvC,KAAAmD,SAAA,eAAoE,GAAA1B,EAAA,OAAAA,EAAA,MAAAH,EAAAe,GAAA,iBAEhjCe,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACA/E,EACA4C,GATA,EAVA,SAAAoC,GACAF,EAAA,SAaA,kBAEA,MAUAG,EAAA,QAAAJ,EAAA","file":"static/js/7.44785b5e8f05d7263859.js","sourcesContent":["<template>\r\n  <div>\r\n    <div v-if=\"carts.length > 0\">\r\n      <b-table responsive :items=\"carts\" :fields=\"fields\">\r\n        <template slot=\"items\" slot-scope=\"row\">\r\n          <p class=\"stat\">{{ row.item.stat }} {{row.item.price}}$</p>\r\n          <b-button @click=\"row.toggleDetails\" variant=\"outline-primary\">{{ row.detailsShowing ? '關閉':'清單' }}<b-badge>{{ row.item.items.length }}</b-badge></b-button>\r\n        </template>\r\n        <template slot=\"row-details\" slot-scope=\"row\">\r\n          <cart :cart=\"row.item.items\" :orderable=\"false\" :numberVariable=\"false\"/>\r\n        </template>\r\n        <template slot=\"action\" slot-scope=\"row\">\r\n          <b-button v-if=\"manage\" @click=\"deleteCart(row.item.id)\">刪除</b-button>\r\n        </template>\r\n        <template slot=\"date\" slot-scope=\"row\">\r\n          <p class=\"date\">{{ getTime(row.item.date.seconds*1000)[0] }}</p>\r\n          <p class=\"time\">{{ getTime(row.item.date.seconds*1000)[1] }}</p>\r\n        </template>\r\n      </b-table>\r\n    </div>\r\n    <div v-else>\r\n      <h5>沒有訂單記錄</h5>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapState, mapActions} from 'vuex'\r\nimport cart from '@/components/cart'\r\nexport default {\r\n  name: 'CartsTable',\r\n  components: { cart },\r\n  props: {\r\n    manage: false\r\n  },\r\n  data () {\r\n    return {\r\n      fields: [\r\n        { key: 'date', label: '時間'},\r\n        { key: 'items', label: '訂單'},\r\n        { key: 'cash', label: '收銀'},\r\n        { key: 'action', label: ''},\r\n      ],\r\n    }\r\n  },\r\n  mounted () {\r\n    this.init()\r\n  },\r\n  computed: {\r\n    ...mapState(['carts', 'userInformation'])\r\n  },\r\n  methods: {\r\n    ...mapActions(['fbGet', 'fbDelete']),\r\n    init () {\r\n      this.getShopCart();\r\n    },\r\n    getShopCart: function() {\r\n      this.fbGet([`shops/${this.userInformation.shopId}/carts`, 'carts'])\r\n    },\r\n    getTime (millis) {\r\n      let date = new Date(millis)\r\n      let date_string = `${date.getFullYear()}年${date.getMonth() + 1}月${date.getDate()}日`\r\n      let time_num = [\r\n        date.getHours(),\r\n        date.getMinutes(),\r\n        date.getSeconds()\r\n      ]\r\n      let time_str = [':', ':', '']\r\n      let time_string = ''\r\n      for (let index in time_num) {\r\n        if(time_num[index] < 10){\r\n          time_string = time_string + '0' + time_num[index] + time_str[index]\r\n        } else {\r\n          time_string = time_string + time_num[index] + time_str[index]\r\n        }\r\n      }\r\n      return [ date_string, time_string ]\r\n    },\r\n    deleteCart (id) {\r\n      this.fbDelete([`shops/${this.userInformation.shopId}/carts/${id}`, id]).then(() => {\r\n        this.$store.commit('REMOVE_CART', id)\r\n      })      \r\n    }\r\n  },\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\np\r\n  white-space nowrap\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/page/CartsTable.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.carts.length > 0)?_c('div',[_c('b-table',{attrs:{\"responsive\":\"\",\"items\":_vm.carts,\"fields\":_vm.fields},scopedSlots:_vm._u([{key:\"items\",fn:function(row){return [_c('p',{staticClass:\"stat\"},[_vm._v(_vm._s(row.item.stat)+\" \"+_vm._s(row.item.price)+\"$\")]),_vm._v(\" \"),_c('b-button',{attrs:{\"variant\":\"outline-primary\"},on:{\"click\":row.toggleDetails}},[_vm._v(_vm._s(row.detailsShowing ? '關閉':'清單')),_c('b-badge',[_vm._v(_vm._s(row.item.items.length))])],1)]}},{key:\"row-details\",fn:function(row){return [_c('cart',{attrs:{\"cart\":row.item.items,\"orderable\":false,\"numberVariable\":false}})]}},{key:\"action\",fn:function(row){return [(_vm.manage)?_c('b-button',{on:{\"click\":function($event){_vm.deleteCart(row.item.id)}}},[_vm._v(\"刪除\")]):_vm._e()]}},{key:\"date\",fn:function(row){return [_c('p',{staticClass:\"date\"},[_vm._v(_vm._s(_vm.getTime(row.item.date.seconds*1000)[0]))]),_vm._v(\" \"),_c('p',{staticClass:\"time\"},[_vm._v(_vm._s(_vm.getTime(row.item.date.seconds*1000)[1]))])]}}])})],1):_c('div',[_c('h5',[_vm._v(\"沒有訂單記錄\")])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0cb41534\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/CartsTable.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0cb41534\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./CartsTable.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./CartsTable.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./CartsTable.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0cb41534\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./CartsTable.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0cb41534\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/CartsTable.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}